<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:lang="http://www.springframework.org/schema/lang"
  xmlns:p="http://www.springframework.org/schema/p"
  xmlns:util="http://www.springframework.org/schema/util"
  xsi:schemaLocation="http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.0.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

  <bean class="de.uplanet.lucy.server.spring.configuration.IxServletRegistrar">
    <property name="servlets">
      <map>
        <entry key="reports" value-ref="quinscape.reports.servlet" />
      </map>
    </property>
  </bean>

  <bean id="quinscape.reports.reportService" class="de.quinscape.intrexx.report.domain.MainReportService"
    p:repository-ref="quinscape.reports.repository" p:exporters-ref="quinscape.reports.exporterList"
    p:parametriser-ref="quinscape.reports.parametriser" p:filler-ref="quinscape.reports.filler"
    p:permission-guard-ref="quinscape.reports.permissionGuard" />

  <bean id="quinscape.reports.servlet" class="de.quinscape.intrexx.report.ReportsServlet"
    p:report-service-ref="quinscape.reports.reportService" />

  <bean id="quinscape.reports.datarecordReportCreator"
    class="de.quinscape.intrexx.report.ixbl.ReportByDatarecordCreator"
    p:report-service-ref="quinscape.reports.reportService" />

  <bean id="quinscape.reports.velocityReportCreator"
    class="de.quinscape.intrexx.report.domain.VelocityReportCreator"
    p:report-service-ref="quinscape.reports.reportService" />

  <bean id="quinscape.reports.permissionGuard"
    class="de.quinscape.intrexx.report.domain.DsucPermissionGuard">
    <property name="dsucGetMembership">
      <bean class="de.uplanet.lucy.server.usermanager.usecases.DsucFactory"
        factory-method="getMembershipInstance" />
    </property>
  </bean>

  <bean id="quinscape.reports.repository"
    class="de.quinscape.intrexx.report.dao.IntrexxApplicationReportRepository" />

  <bean id="quinscape.reports.filler" class="de.quinscape.intrexx.report.domain.fill.JdbcFiller" />

  <bean id="quinscape.reports.parametriser"
    class="de.quinscape.intrexx.report.domain.fill.SequentialParametriser">
    <property name="parameterValueCreators">
      <list>
        <bean class="de.quinscape.intrexx.report.domain.fill.ContextParameterValueCreator" />
        <bean
          class="de.quinscape.intrexx.report.domain.fill.ContextConnectionParameterValueCreator" />
        <bean class="de.quinscape.intrexx.report.domain.fill.ViewDataParameterValueCreator" />
        <bean class="de.quinscape.intrexx.report.domain.fill.DataRecordParameterValueCreator" />
        <bean class="de.quinscape.intrexx.report.domain.fill.DatabaseParameterValueCreator" />
        <bean class="de.quinscape.intrexx.report.domain.fill.RequestParameterValueCreator" />
      </list>
    </property>
    <property name="conversionService">
      <bean class="org.springframework.context.support.ConversionServiceFactoryBean">
        <property name="converters">
          <list>
            <bean class="de.quinscape.intrexx.report.StringToDateConverter" />
          </list>
        </property>
      </bean>
    </property>
  </bean>

  <!--
    Alle Exporter die den verschiedenen Clients zur VerfÃ¼gung stehen.
  -->
  <util:list id="quinscape.reports.exporterList">
    <bean class="de.quinscape.intrexx.report.domain.export.PdfExporter" />
    <bean class="de.quinscape.intrexx.report.domain.export.HtmlExporter" />
    <bean class="de.quinscape.intrexx.report.domain.export.XlsExporter" />
    <bean class="de.quinscape.intrexx.report.domain.export.CsvExporter" />
    <bean class="de.quinscape.intrexx.report.domain.export.RtfExporter" />
    <bean class="de.quinscape.intrexx.report.domain.export.XlsxExporter" />
    <bean class="de.quinscape.intrexx.report.domain.export.DocxExporter" />
    <bean class="de.quinscape.intrexx.report.domain.export.PptxExporter" />
    <bean class="de.quinscape.intrexx.report.domain.export.OdtExporter" />
    <bean class="de.quinscape.intrexx.report.domain.export.OdsExporter" />
  </util:list>

</beans>
